!function(e){function t(t){for(var a,c,s=t[0],i=t[1],l=t[2],d=0,f=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);f.length;)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={1:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;r.push([181,0]),n()}({181:function(e,t,n){"use strict";n.r(t);var a=n(8),o=n.n(a),r=n(9),c=n.n(r),s=n(10),i=n.n(s),l=n(2),u=n.n(l),d=n(6),f=n.n(d),m=n(14),p=n.n(m),h=n(11),v=n.n(h),b=n(0),y=n.n(b),E=n(12),g=n.n(E),k=n(15),N=n.n(k),I=n(1),C=n.n(I),x=function(e){var t,n=e.conferenceQuestion,a=e.updateInfo,o=e.dropInfo,r=function(e,t){a(t.target.value,"question",e)},c=function(e,t){"checkbox"===e&&a("0","required",t),a(e,"type",t)},s=function(e,t){a(1===e?0:1,"required",t)};return n&&n.length>0&&(t=n.map((function(e,t){return y.a.createElement("div",{key:t,className:"col-sm-6"},y.a.createElement("div",{className:"card border-primary mb-3"},y.a.createElement("div",{className:"card-body"},y.a.createElement("button",{className:"btn btn-sm btn-outline-danger float-right mb-3",onClick:o.bind(null,t)},"Delete"),y.a.createElement("label",null,"Question ",e.sort),y.a.createElement("input",{type:"text",className:"form-control mb-3",name:"question",value:e.question,onChange:r.bind(void 0,t)}),y.a.createElement("label",null,y.a.createElement("input",{type:"radio",name:"type".concat(t),checked:"text"===e.type,onChange:c.bind(void 0,"text",t)}),"Text field"),y.a.createElement("div",{className:"ml-3"},y.a.createElement("label",null,y.a.createElement("input",{type:"checkbox",name:"required".concat(t),checked:1===e.required,onChange:s.bind(void 0,e.required,t)}),"Text field required")),y.a.createElement("label",null,y.a.createElement("input",{type:"radio",name:"type".concat(t),checked:"checkbox"===e.type,onChange:c.bind(void 0,"checkbox",t)}),"Checkbox"))))}))),y.a.createElement("div",{className:"row"},t)};x.propTypes={conferenceQuestion:C.a.array,resource:C.a.object,key:C.a.number,updateInfo:C.a.func,dropInfo:C.a.func};var j=x,Q=n(32),w=function(e){function t(e){var n;return o()(this,t),(n=i()(this,f()(t).call(this,e))).state={titleError:!1},n.titleRef=y.a.createRef(),n.services=n.services.bind(u()(n)),n.checkTitle=n.checkTitle.bind(u()(n)),n.clearCheck=n.clearCheck.bind(u()(n)),n.disableSave=n.disableSave.bind(u()(n)),n}return v()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.titleRef.current.focus()}},{key:"services",value:function(){if(0!==this.props.services.length)return this.props.services.map((function(e,t){return y.a.createElement("option",{key:t,value:e.id},e.title)}))}},{key:"checkTitle",value:function(){this.setState({titleError:0===this.props.resource.title.length})}},{key:"clearCheck",value:function(){this.setState({titleError:!1})}},{key:"disableSave",value:function(){return 0===this.props.resource.title.length}},{key:"render",value:function(){var e,t=this.props,n=t.update,a=t.locations,o=t.resource,r=t.save,c=t.addInfo,s=t.updateInfo,i=t.dropInfo,l=t.conferenceQuestion,u=this.disableSave(),d=this.state.titleError?"form-control border-danger":"form-control";return null!==a&&(e=a.map((function(e,t){return y.a.createElement("option",{key:t,value:e.id},e.title)}))),y.a.createElement("div",{className:"p-3"},y.a.createElement("div",{className:"mb-4"},y.a.createElement("label",{className:"d-block"},"Title:",y.a.createElement("span",{className:"text-danger"},"*")),y.a.createElement("input",{name:"title",type:"text",id:"conference-title",placeholder:this.state.titleError?"Title may not be empty.":null,value:o.title,onBlur:this.checkTitle,onFocus:this.clearCheck,ref:this.titleRef,onChange:n.bind(null,"title"),className:d})),y.a.createElement("div",{className:"mb-4"},y.a.createElement("label",{className:"d-block"},"Description:"),y.a.createElement(Q.a,{ident:toString(o.id),content:o.description,update:n.bind(null,"description")})),y.a.createElement("div",{className:"row"},y.a.createElement("div",{className:"col-sm-6"},y.a.createElement("div",{className:"mb-4"},y.a.createElement("label",null,"Default location:"),y.a.createElement("select",{onChange:n.bind(null,"locationId"),value:o.locationId,className:"form-control"},y.a.createElement("option",{value:"0",disabled:!0},"Choose a location below..."),e))),y.a.createElement("div",{className:"col-sm-6"},y.a.createElement("label",null,"Payment service:"),y.a.createElement("select",{name:"accountId",id:"accountId",onChange:n.bind(null,"accountId"),className:"form-control",value:o.accountId},y.a.createElement("option",{value:"0"},"Do not use a payment service"),this.services()))),y.a.createElement("div",{className:"d-flex justify-content-start mb-4"},y.a.createElement("h4",null,"Extra Visitor information"),y.a.createElement("button",{className:"ml-4 btn btn-success btn-sm",onClick:c},y.a.createElement("i",{className:"fas fa-plus"})," Add question")),y.a.createElement("div",{className:"mb-4"},y.a.createElement(j,{conferenceQuestion:l,dropInfo:i,updateInfo:s})),y.a.createElement("div",{className:"text-center"},y.a.createElement("button",{className:"btn btn-primary",disabled:u,onClick:r},y.a.createElement("i",{className:"fas fa-save"})," Save")))}}]),t}(b.Component);w.propTypes={resource:C.a.object,update:C.a.func,locations:C.a.array,dropInfo:C.a.func,services:C.a.array,save:C.a.func,addInfo:C.a.func,updateInfo:C.a.func,conferenceQuestion:C.a.array};var S=w,T=n(41),O={id:0,title:"",description:"",locationId:0,active:1},A={id:0,type:"text",question:"",required:0,sort:1},M=function(e){function t(e){var n;o()(this,t),(n=i()(this,f()(t).call(this,e))).restUrl="conference/Admin/Conference/",n.label="Conference",n.defaultResource=Object.assign({},O),n.defaultInfo=Object.assign({},A),n.locations=null,n.state.conferenceQuestion=[],n.addInfo=n.addInfo.bind(u()(n)),n.updateInfo=n.updateInfo.bind(u()(n)),n.dropInfo=n.dropInfo.bind(u()(n)),n.loadConferenceQuestion=n.loadConferenceQuestion.bind(u()(n));return n.columns=[{column:"options",callback:function(e,t){return function(e){var t=n.state.listing[e].id,a=n.state.listing[e].accountId;return y.a.createElement("div",{className:"dropdown"},y.a.createElement("button",{type:"button","data-toggle":"dropdown","aria-haspopup":"true",className:"btn btn-outline-secondary btn-sm",id:"dropdownMenuButton"},y.a.createElement("i",{className:"fas fa-bars"})),y.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},y.a.createElement("a",{className:"dropdown-item pointer",href:"./conference/Admin/Session/?conferenceId="+t},y.a.createElement("i",{className:"fas fa-list"})," Sessions"),y.a.createElement("hr",{className:"my-1"}),a>0?y.a.createElement("a",{className:"dropdown-item pointer",href:"conference/Admin/Payment/syncAccount/?conferenceId=".concat(t)},y.a.createElement("i",{className:"fas fa-money-check-alt"})," Force service"):null,y.a.createElement("a",{className:"dropdown-item pointer",href:"#",onClick:n.editResource.bind(u()(n),e)},y.a.createElement("i",{className:"fas fa-edit"})," Edit"),y.a.createElement("a",{className:"dropdown-item pointer",href:"#",onClick:n.deletePrompt.bind(u()(n),e)},y.a.createElement("i",{className:"fas fa-trash"})," Delete")))}(t)},style:{width:"10%"}},{column:"title",label:"Title",callback:function(e){return y.a.createElement("a",{href:"./conference/User/Conference/".concat(e.id)},e.title)},sort:!0},{column:"location",label:"Location"},{column:"sessionCount",label:"Sessions",className:"text-right",callback:function(e){return y.a.createElement("a",{href:"conference/Admin/Session/?conferenceId=".concat(e.id)},e.sessionCount)}}],n.state.resource=Object.assign({},n.defaultResource),n.locations=null,n.state.services=[],n}return v()(t,e),c()(t,[{key:"componentDidMount",value:function(){p()(f()(t.prototype),"componentDidMount",this).call(this),Object(T.a)(this),this.loadServices()}},{key:"loadResource",value:function(e){p()(f()(t.prototype),"loadResource",this).call(this,e),this.loadConferenceQuestion(e)}},{key:"loadServices",value:function(){var e=this;$.ajax({url:"conference/Admin/Account/",data:{},dataType:"json",type:"get",success:function(t){e.setState({services:t.listing})},error:function(){}})}},{key:"loadConferenceQuestion",value:function(e){var t=this,n=this.state.listing[e].id;$.ajax({url:"conference/Admin/ConferenceQuestion/conference",data:{id:n},dataType:"json",type:"get",success:function(e){t.setState({conferenceQuestion:e.conferenceQuestion})},error:function(){}})}},{key:"deletePrompt",value:function(e,t){t.preventDefault(),"DELETE"===prompt('Are you sure you want to delete this conference and all its sessions, registrations, and payments? If you are sure, type "DELETE" below.')&&this.sendDelete(e)}},{key:"sendDelete",value:function(e){var t=this;$.ajax({url:"conference/Admin/Conference/"+this.state.listing[e].id,data:{},dataType:"json",type:"delete",success:function(){t.load()},error:function(){}})}},{key:"addInfo",value:function(){var e=this.state.conferenceQuestion,t=Object.assign({},this.defaultInfo);e.length>0&&(t.sort=String(parseInt(e[e.length-1].sort)+1)),e.push(t),this.setState({conferenceQuestion:e})}},{key:"dropInfo",value:function(e){var t=this,n=this.state.conferenceQuestion,a=n[e];n.splice(e,1),this.setState({conferenceQuestion:n}),a.id&&$.ajax({url:"conference/Admin/ConferenceQuestion/"+a.id,data:{},dataType:"json",type:"delete",success:function(){},error:function(){t.setMessage("Could not delete extra info")}})}},{key:"updateInfo",value:function(e,t,n){var a=this.state.conferenceQuestion;a[n][t]=e,this.setState({conferenceQuestion:a})}},{key:"form",value:function(e){return e?y.a.createElement(S,{services:this.state.services,conferenceQuestion:this.state.conferenceQuestion,updateInfo:this.updateInfo,dropInfo:this.dropInfo,addInfo:this.addInfo,save:this.save,close:this.finish,resource:this.state.resource,update:this.update,locations:this.locations}):y.a.createElement("div",null)}},{key:"success",value:function(e){e.success?(this.saveConferenceQuestion(e.id),this.load(),this.setMessage(y.a.createElement("div",null,y.a.createElement("i",{className:"far fa-thumbs-up"})," Save successful."),"success"),this.reset()):this.setMessage(y.a.createElement("div",null,y.a.createElement("i",{className:"fas fa-exclamation-triangle"})," Unable to save:",e.error))}},{key:"reset",value:function(){p()(f()(t.prototype),"reset",this).call(this),this.setState({conferenceQuestion:[]})}},{key:"saveConferenceQuestion",value:function(e){var t=this,n=this.state.conferenceQuestion;0!==n.length&&$.ajax({url:"conference/Admin/ConferenceQuestion/",data:{conferenceQuestion:n,conferenceId:e},dataType:"json",type:"post",success:function(){},error:function(){t.setMessage("Could not save extra information data.")}})}},{key:"title",value:function(){var e;return null!==this.locations&&0===this.locations.length&&(e=y.a.createElement("div",{className:"alert alert-warning"},y.a.createElement("i",{className:"fas fa-exclamation-triangle"}),"You should ",y.a.createElement("a",{href:"conference/Admin/Location"},"create a location")," ","to assign to your conferences.")),y.a.createElement("div",null,y.a.createElement("h2",null,"Conferences"),e)}},{key:"overlay",value:function(){return{content:y.a.createElement("div",{className:"conference-form"},this.form(this.state.overlay)),width:"90%",title:this.state.resource.id>0?"Update conference":"Create conference",close:this.load}}}]),t}(N.a);g.a.render(y.a.createElement(M,null),document.getElementById("Conference"))},32:function(e,t,n){"use strict";var a=n(8),o=n.n(a),r=n(9),c=n.n(r),s=n(10),i=n.n(s),l=n(6),u=n.n(l),d=n(11),f=n.n(d),m=n(0),p=n.n(m),h=n(1),v=n.n(h),b=(n(71),n(72),n(73),n(36)),y=n.n(b),E=function(e){function t(e){var n;return o()(this,t),(n=i()(this,u()(t).call(this,e))).config={quickInsertEnabled:!1,toolbarButtons:["bold","italic","align","formatOL","formatUL","outdent","indent","quote","insertLink","insertTable","specialCharacters","insertHR","selectAll","clearFormatting","html"]},n}return f()(t,e),c()(t,[{key:"componentDidMount",value:function(){new y.a}},{key:"render",value:function(){return p.a.createElement(y.a,{tag:"textarea",config:this.config,model:this.props.content,onModelChange:this.props.update})}}]),t}(m.Component);E.propTypes={content:v.a.string,update:v.a.func,ident:v.a.string},t.a=E},41:function(e,t,n){"use strict";t.a=function(e){$.ajax({url:"conference/Admin/Location",dataType:"json",type:"get",success:function(t){e.locations=t.listing},error:function(){e.setMessage("Could not access server")}})}}});