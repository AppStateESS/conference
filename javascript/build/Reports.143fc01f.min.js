!function(e){function t(t){for(var r,o,i=t[0],c=t[1],l=t[2],f=0,d=[];f<i.length;f++)o=i[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);d.length;)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={9:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;a.push([110,0]),n()}({110:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var r=n(8),s=n.n(r),a=n(9),o=n.n(a),i=n(10),c=n.n(i),l=n(6),u=n.n(l),f=n(2),d=n.n(f),m=n(11),h=n.n(m),p=n(0),v=n.n(p),y=n(12),S=n.n(y),g=n(16),C=n.n(g),E=function(e){function t(e){var n;return s()(this,t),(n=c()(this,u()(t).call(this,e))).state={conferences:null,sessions:null,currentConferenceKey:-1,currentSessionKey:-1,currentConference:{title:"n/a"},currentSession:{title:"n/a"},registrationCount:0},n.setConference=n.setConference.bind(d()(n)),n.setSession=n.setSession.bind(d()(n)),n}return h()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.loadConferences()}},{key:"loadConferences",value:function(){var e=this;$.ajax({url:"conference/Admin/Conference",dataType:"json",type:"get",success:function(t){e.setState({conferences:t.listing})},error:function(){}})}},{key:"loadSessions",value:function(){var e=this;0!==this.state.currentConference.id?$.ajax({url:"conference/Admin/Session",data:{conferenceId:this.state.currentConference.id},dataType:"json",type:"get",success:function(t){e.setState({sessions:t.listing,currentSession:{title:"n/a"}})},error:function(){}}):this.setState({sessions:null})}},{key:"loadRegistrationCount",value:function(){var e=this;$.ajax({url:"conference/Admin/Registration/count",data:{sessionId:this.state.currentSession.id},dataType:"json",type:"get",success:function(t){e.setState({registrationCount:t.count})},error:function(){}})}},{key:"setConference",value:function(e){var t=parseInt(e.target.value);if(-1===t)return this.resetConference(),void this.setState({currentConferenceKey:t});this.setState({currentConference:this.state.conferences[t],currentConferenceKey:t},this.loadSessions)}},{key:"resetSession",value:function(){this.setState({currentSession:{title:"n/a"},currentSessionKey:-1})}},{key:"resetConference",value:function(){this.setState({currentConference:{title:"n/a"},currentConferenceKey:-1},this.resetSession)}},{key:"setSession",value:function(e){var t=parseInt(e.target.value);if(-1===t)return this.resetSession(),void this.setState({currentSessionKey:t});this.setState({currentSession:this.state.sessions[t],currentSessionKey:t},this.loadRegistrationCount)}},{key:"sessionList",value:function(){var e=this.state.sessions;if(null!==e){var t=e.map((function(e,t){return v.a.createElement("option",{key:e.id,value:t},e.title," - ",C()(1e3*e.eventDate).format("MMMM D, YYYY"))}));return v.a.createElement("select",{className:"form-control",value:this.state.currentSessionKey,onChange:this.setSession},v.a.createElement("option",{value:"-1"},"Choose session"),t)}}},{key:"conferenceList",value:function(){var e=this.state.conferences;if(null!==e){var t=e.map((function(e,t){return v.a.createElement("option",{key:e.id,value:t},e.title)}));return v.a.createElement("select",{className:"form-control",value:this.state.currentConferenceKey,onChange:this.setConference},v.a.createElement("option",{value:"-1"},"Choose a conference"),t)}}},{key:"downloadPaymentsButton",value:function(){if(void 0!==this.state.currentSession.id&&0!==this.state.registrationCount){var e="conference/Admin/Reports/payments/?sid=".concat(this.state.currentSession.id);return v.a.createElement("a",{className:"btn btn-primary",href:e},v.a.createElement("i",{className:"fas fa-download"})," Download payments")}}},{key:"downloadRegistrationsButton",value:function(){if(void 0!==this.state.currentSession.id){if(0===this.state.registrationCount)return v.a.createElement("p",null,"No registrations found for this session.");var e="conference/Admin/Reports/registrations/?sid=".concat(this.state.currentSession.id);return v.a.createElement("a",{className:"btn btn-primary",href:e},v.a.createElement("i",{className:"fas fa-download"})," Download registrations")}}},{key:"render",value:function(){var e=this.state,t=e.currentSession,n=e.currentConference,r=e.registrationCount;return v.a.createElement("div",null,v.a.createElement("h2",null,"Reports"),v.a.createElement("table",{className:"table table-striped"},v.a.createElement("thead",null,v.a.createElement("tr",null,v.a.createElement("th",{className:"w-50"},"Conference"),v.a.createElement("th",null,"Session"))),v.a.createElement("tbody",null,v.a.createElement("tr",null,v.a.createElement("td",null,this.conferenceList()),v.a.createElement("td",null,this.sessionList())))),v.a.createElement("p",null,v.a.createElement("strong",null,"Conference:")," ",n.title),v.a.createElement("p",null,v.a.createElement("strong",null,"Session:")," ",t.title,void 0!==t.eventDate?v.a.createElement("span",null," ","–"," ",C()(1e3*t.eventDate).format("MMMM D, YYYY")," ","– ",v.a.createElement("strong",null,"Registrations:")," ",r):null),v.a.createElement("div",null,v.a.createElement("span",{className:"pr-2"},this.downloadRegistrationsButton()),v.a.createElement("span",null,this.downloadPaymentsButton())))}}]),t}(p.Component);S.a.render(v.a.createElement(E,null),document.getElementById("Reports"))}});